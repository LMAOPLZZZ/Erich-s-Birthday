<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>For My Love</title>
<style>
  :root{
    --pink-1: #ffb3d9;
    --pink-2: #ff88c7;
    --night-1: #0b0620;
    --night-2: #2b1538;
    --glow: rgba(255,180,230,0.9);
    --soft: rgba(255,255,255,0.9);
  }

  html,body{
    height:100%;
    margin:0;
    font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg, var(--night-2) 0%, var(--night-1) 60%);
    color: white;
    overflow: hidden;
  }

  .moon {
    position: absolute;
    top: 8%;
    left: 12%;
    width: 100px;
    height: 100px;
    background: radial-gradient(circle at 35% 35%, #fff9e6 0%, #ffecc7 40%, #ffd68f 100%);
    border-radius: 50%;
    box-shadow: 
      0 0 40px 15px rgba(255, 235, 180, 0.6),
      0 0 80px 30px rgba(255, 220, 150, 0.4),
      0 0 120px 45px rgba(255, 200, 120, 0.2),
      inset -10px -10px 20px rgba(200, 180, 140, 0.2);
    z-index: 2;
    animation: moonGlow 4s ease-in-out infinite;
    pointer-events: none;
  }

  @keyframes moonGlow {
    0%, 100% { 
      box-shadow: 
        0 0 40px 15px rgba(255, 235, 180, 0.6),
        0 0 80px 30px rgba(255, 220, 150, 0.4),
        0 0 120px 45px rgba(255, 200, 120, 0.2),
        inset -10px -10px 20px rgba(200, 180, 140, 0.2);
    }
    50% { 
      box-shadow: 
        0 0 50px 20px rgba(255, 235, 180, 0.7),
        0 0 100px 40px rgba(255, 220, 150, 0.5),
        0 0 150px 60px rgba(255, 200, 120, 0.3),
        inset -10px -10px 20px rgba(200, 180, 140, 0.2);
    }
  }

  .stars-container {
    position: absolute;
    inset: 0;
    overflow: hidden;
    z-index: 0;
    pointer-events: none;
  }

  .star {
    position: absolute;
    width: 2px;
    height: 2px;
    background: white;
    border-radius: 50%;
    box-shadow: 0 0 3px rgba(255,255,255,0.8);
  }

  @keyframes twinkle {
    0%, 100% { opacity: 0.3; transform: scale(0.8); }
    50% { opacity: 1; transform: scale(1.2); }
  }

  .field {
    position: absolute;
    inset:0;
    overflow:hidden;
    display:block;
    background-image: linear-gradient(180deg, rgba(0,0,0,0.08), rgba(0,0,0,0.3));
    animation: slowPan 30s linear infinite;
    transform-origin: center center;
  }

  @keyframes slowPan {
    0% { transform: translateX(0); }
    50% { transform: translateX(-40px); }
    100% { transform: translateX(0); }
  }

  @keyframes windGust {
    0%, 100% { transform: rotate(0deg) translateX(0); }
    25% { transform: rotate(8deg) translateX(4px); }
    50% { transform: rotate(-6deg) translateX(-3px); }
    75% { transform: rotate(7deg) translateX(3px); }
  }

  .ground {
    position:absolute;
    left:0;
    right:0;
    bottom:0;
    height:40%;
    background: linear-gradient(180deg, #2d5a2d 0%, #1a3d1a 50%, #0d2b0d 100%);
    z-index:6;
  }

  .grass {
    position: absolute;
    width: 3px;
    height: 30px;
    background: linear-gradient(180deg, #1a5c3a 0%, #0d3d25 100%);
    border-radius: 2px 2px 0 0;
    transform-origin: bottom center;
    z-index: 7;
    filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.4));
  }

  @keyframes grassSway {
    0%, 100% { transform: rotate(-3deg) scaleY(1); }
    25% { transform: rotate(5deg) scaleY(0.98); }
    50% { transform: rotate(-4deg) scaleY(1); }
    75% { transform: rotate(6deg) scaleY(0.97); }
  }

  .firefly {
    position:absolute;
    width:6px;
    height:6px;
    background: radial-gradient(circle, rgba(255,240,190,1) 0%, rgba(255,200,120,0.8) 35%, rgba(255,200,120,0.05) 60%, transparent 70%);
    border-radius:50%;
    filter: blur(3px) drop-shadow(0 0 10px rgba(255,190,220,0.6));
    opacity:0.95;
    z-index:11;
    pointer-events:none;
  }

  .tulip {
    position: absolute;
    width: 90px;
    height: 160px;
    transform-origin: 50% 85%;
    z-index: 9;
    cursor: pointer;
    transition: transform 0.25s ease, opacity 0.6s ease;
  }
  .tulip.picked { opacity: 0.18; transform: translateY(16px) scale(0.9); pointer-events:none; }

  @keyframes sway {
    0% { transform: rotate(-2deg) translateY(0px); }
    25% { transform: rotate(4deg) translateY(-2px); }
    50% { transform: rotate(-3deg) translateY(0px); }
    75% { transform: rotate(5deg) translateY(-1px); }
    100% { transform: rotate(-2deg) translateY(0px); }
  }

  .tulip svg .petal {
    transition: filter 220ms ease, transform 200ms ease;
    filter: drop-shadow(0 0 0 rgba(255,190,230,0));
  }
  .tulip:hover svg .petal {
    transform-origin: 50% 50%;
    transform: translateY(-2px) scale(1.03);
    filter: drop-shadow(0 0 14px rgba(255,160,210,0.45));
  }

  .message {
    position: fixed;
    z-index: 20;
    left:50%;
    transform: translateX(-50%);
    bottom: 14%;
    background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,245,250,0.95));
    color: #2b1538;
    padding: 14px 18px;
    border-radius: 14px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.45);
    font-weight:600;
    display:none;
    min-width: 220px;
    max-width: 70%;
    text-align:center;
    line-height:1.25;
  }
  .message .accent {
    color: var(--pink-2);
    font-weight:700;
  }

  .door {
    position: absolute;
    left:50%;
    transform: translateX(-50%);
    bottom: 30%;
    width:140px;
    height:220px;
    background: linear-gradient(180deg,#321b2a,#1e0e1a);
    border-radius:6px;
    border:4px solid rgba(0,0,0,0.6);
    z-index: 8;
    box-shadow: 0 10px 40px rgba(0,0,0,0.6), inset 0 -20px 60px rgba(255,200,230,0.03);
  }
  .chain-container {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: 50%;
    width: 140px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2px;
    z-index: 10;
  }

  .chain-link {
    width: 20px;
    height: 32px;
    border: 3px solid #555;
    border-radius: 10px;
    background: linear-gradient(135deg, #999 0%, #555 50%, #777 100%);
    box-shadow: 
      inset 0 2px 4px rgba(255,255,255,0.3),
      inset 0 -2px 4px rgba(0,0,0,0.5),
      0 3px 6px rgba(0,0,0,0.4);
    transition: all 0.8s ease;
    position: relative;
  }

  .chain-link.broken {
    opacity: 0;
    transform: translateY(-30px) rotate(45deg) scale(0.5);
  }

  .fade {
    position:fixed;
    inset:0;
    background: #000;
    opacity:0;
    display:flex;
    align-items:center;
    justify-content:center;
    z-index: 30;
    transition: opacity 2s ease;
    pointer-events: none;
  }
  .fade.active { pointer-events: all; }

  .finalText {
    color: #ffdff1;
    font-family: "Georgia", serif;
    font-size: 28px;
    white-space: pre-line;
    text-align:center;
    max-width:85%;
    line-height:1.25;
  }
  .typing {
    border-right: 2px solid rgba(255,210,230,0.9);
    white-space: pre;
    overflow:hidden;
    width:0;
    display:inline-block;
    animation: typeanim 5s steps(60,end) forwards;
  }
  @keyframes typeanim {
    to { width: 100%; }
  }

  .envelope-scene {
    position: fixed;
    inset: 0;
    background: linear-gradient(180deg, #ffffff 0%, #fff5f9 100%);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 40;
    opacity: 0;
    transition: opacity 1.5s ease;
  }
  .envelope-scene.active { 
    display: flex; 
    opacity: 1;
  }

  .envelope-container {
    position: relative;
    cursor: pointer;
    animation: floatEnvelope 3s ease-in-out infinite;
    transition: all 0.8s ease;
  }

  .envelope-container.opened {
    animation: none;
  }

  @keyframes floatEnvelope {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
  }

  .envelope {
    width: 200px;
    height: 140px;
    position: relative;
    transition: opacity 0.8s ease, transform 0.3s ease;
    opacity: 1;
  }

  .envelope-container.opened .envelope {
    opacity: 0;
    pointer-events: none;
  }

  .envelope:hover {
    transform: scale(1.05);
  }

  .envelope-back {
    width: 200px;
    height: 120px;
    background: linear-gradient(135deg, #ffb3d9 0%, #ff88c7 100%);
    border-radius: 4px;
    position: absolute;
    bottom: 0;
    box-shadow: 0 8px 30px rgba(255, 136, 199, 0.4);
  }

  .envelope-flap {
    width: 0;
    height: 0;
    border-left: 100px solid transparent;
    border-right: 100px solid transparent;
    border-bottom: 80px solid #ff88c7;
    position: absolute;
    top: 0;
    left: 0;
    transform-origin: top center;
    z-index: 2;
  }

  .envelope-front {
    width: 0;
    height: 0;
    border-left: 100px solid transparent;
    border-right: 100px solid transparent;
    border-top: 60px solid #ffcce5;
    position: absolute;
    bottom: 0;
    left: 0;
    z-index: 1;
  }

  .letter {
    width: 400px;
    max-width: 90vw;
    height: 500px;
    max-height: 80vh;
    background: #fffef8;
    border-radius: 8px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.3);
    padding: 40px;
    box-shadow: 0 10px 50px rgba(0,0,0,0.3);
    opacity: 0;
    transition: all 0.8s ease;
    z-index: 10;
    overflow-y: auto;
    pointer-events: none;
  }

  .letter.opened {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
    pointer-events: all;
  }

  .letter-content {
    color: #2b1538;
    font-family: 'Georgia', serif;
    font-size: 14px;
    line-height: 1.6;
  }

  .letter-content h3 {
    margin: 0 0 20px 0;
    color: #ff88c7;
    font-size: 24px;
    text-align: center;
  }

  .letter-content p {
    margin: 0 0 16px 0;
    font-size: 16px;
  }

  .letter-content .signature {
    margin-top: 30px;
    text-align: right;
    font-style: italic;
    color: #ff88c7;
    font-size: 16px;
  }

  @media (max-width:720px){
    .tulip { width:64px; height:120px; }
    .finalText { font-size:20px; }
    .envelope { transform: scale(0.8); }
    .moon { width: 70px; height: 70px; }
  }
</style>
</head>
<body>
  <div class="moon"></div>
  <div class="stars-container" id="starsContainer"></div>
  
  <div class="field" id="field">
    <div class="door" id="door">
      <div class="chain-container" id="chainContainer"></div>
    </div>
    <div class="ground"></div>
  </div>

  <div class="message" id="messageBox"></div>

  <div class="fade" id="fade">
    <div class="finalText" id="finalText"></div>
  </div>

  <div class="envelope-scene" id="envelopeScene">
    <div class="envelope-container" id="envelopeContainer">
      <div class="envelope">
        <div class="envelope-flap"></div>
        <div class="envelope-back"></div>
        <div class="envelope-front"></div>
      </div>
    </div>
    <div class="letter" id="letter">
      <div class="letter-content">
        <h3>My Dearest Love, Erich</h3>
        <p>Every moment with you feels like a dream I never want to wake from. You are the sun that brightens my darkest days and the star that guides me through the night.</p>
        <p>Your smile lights up my world in ways words cannot capture. Your laughter is my favorite melody<br>(legit HAAWHHAHAW yung kayla sir renan), and your happiness is my greatest treasure.</p>
        <p>On this special day, I want you to know how deeply you are loved, cherished, and adored. You deserve all the beauty and joy this world has to offer.</p>
        <p>Erich, From the bottom of my heart, i know i cannot give you everything, but i will give you everything i have.</p>
        <p>Happy Birthday, my love. Here's to many more fun, sad, and crucial moments together.</p>
        <p class="signature">Forever yours,<br>With all my heart, Kristian. â™¡</p> 
      </div> 
    </div>
  </div> 

  <audio id="bgm" loop>
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_3f343a7e13.mp3?filename=soft-breeze-111304.mp3" type="audio/mpeg">
  </audio>

<script>
const messages = [
  "Your face is the one i want to wake up to",
  "Every tulip is a reminder of you",
  "You make ordinary days the life i want live",
  "I'm grateful for every moment i spend with you.",
  "Happy Birthday, my love ðŸŒ· (here's a tulip)",
  "Remember when we had our first kiss?", 
  "Someone's getting their license",
  "'Oh kay tagal, Din kitang mamahalin...'",
  "Erich, Ery, My Love, Baby, BOOOBOOBEAR!!",
  "I have my rough times with you, I knew it was the right choice \n because to resolve them i have to lower my pride, because that's what love is",
  "My girlfriend?!!?? Has a SONY?!",
  "The most beautiful person in the world",
  "Nganiii!!",
  "Thank you for always being there with me",
]; //FlowerMessages

function createChainLinks(count = 4) {
  const container = document.getElementById('chainContainer');
  for (let i = 0; i < count; i++) {
    const link = document.createElement('div');
    link.className = 'chain-link';
    link.id = `chain-${i}`;
    container.appendChild(link);
  }
}
createChainLinks(4);

function createStars(count = 150) {
  const container = document.getElementById('starsContainer');
  for (let i = 0; i < count; i++) {
    const star = document.createElement('div');
    star.className = 'star';
    star.style.left = Math.random() * 100 + '%';
    star.style.top = Math.random() * 70 + '%';
    
    const size = Math.random() * 2 + 1;
    star.style.width = size + 'px';
    star.style.height = size + 'px';
    
    const duration = Math.random() * 3 + 2;
    const delay = Math.random() * 5;
    star.style.animation = `twinkle ${duration}s ease-in-out ${delay}s infinite`;
    
    container.appendChild(star);
  }
}
createStars();

function createGrass(count = 200) {
  const field = document.getElementById('field');
  for (let i = 0; i < count; i++) {
    const grass = document.createElement('div');
    grass.className = 'grass';
    grass.style.left = Math.random() * 100 + '%';
    grass.style.bottom = Math.random() * 35 + '%';
    
    const height = Math.random() * 20 + 20;
    grass.style.height = height + 'px';
    
    const duration = Math.random() * 2 + 2;
    const delay = Math.random() * 3;
    grass.style.animation = `grassSway ${duration}s ease-in-out ${delay}s infinite`;
    
    field.appendChild(grass);
  }
}
createGrass();

function createTulipSVG(colorHue = 320) {
  const ns = "http://www.w3.org/2000/svg";
  const svg = document.createElementNS(ns, "svg");
  svg.setAttribute("viewBox", "0 0 120 200");
  svg.setAttribute("width", "100%");
  svg.setAttribute("height", "100%");

  const stem = document.createElementNS(ns,"rect");
  stem.setAttribute("x","56");
  stem.setAttribute("y","80");
  stem.setAttribute("width","8");
  stem.setAttribute("height","100");
  stem.setAttribute("rx","4");
  stem.setAttribute("fill","#2a7b4a");
  stem.setAttribute("opacity","0.98");
  svg.appendChild(stem);

  const leaf = document.createElementNS(ns,"path");
  leaf.setAttribute("d","M60 120 C 28 115, 10 150, 34 160 C 64 176, 70 140, 60 120 Z");
  leaf.setAttribute("fill","#22663d");
  leaf.setAttribute("opacity","0.95");
  svg.appendChild(leaf);

  const petalGroup = document.createElementNS(ns,"g");
  petalGroup.setAttribute("transform","translate(0,10)");

  const petalC = document.createElementNS(ns,"path");
  petalC.setAttribute("d","M60 30 C 40 15, 28 55, 55 72 C 60 75, 66 75, 70 72 C 96 54, 84 14, 60 30 Z");
  petalC.setAttribute("class","petal");
  petalC.setAttribute("fill", `hsl(${colorHue} 80% 68%)`);

  const petalL = document.createElementNS(ns,"path");
  petalL.setAttribute("d","M52 38 C 28 28, 18 64, 44 74 C 50 76, 54 70, 52 38 Z");
  petalL.setAttribute("class","petal");
  petalL.setAttribute("fill", `hsl(${colorHue} 75% 62%)`);

  const petalR = document.createElementNS(ns,"path");
  petalR.setAttribute("d","M68 38 C 92 28, 102 64, 76 74 C 70 76, 66 70, 68 38 Z");
  petalR.setAttribute("class","petal");
  petalR.setAttribute("fill", `hsl(${colorHue} 82% 70%)`);

  petalGroup.appendChild(petalL);
  petalGroup.appendChild(petalC);
  petalGroup.appendChild(petalR);

  const highlight = document.createElementNS(ns,"path");
  highlight.setAttribute("d","M60 38 C 58 36, 62 30, 64 34");
  highlight.setAttribute("fill","none");
  highlight.setAttribute("stroke","rgba(255,255,255,0.28)");
  highlight.setAttribute("stroke-width","1.6");
  highlight.setAttribute("stroke-linecap","round");
  petalGroup.appendChild(highlight);

  svg.appendChild(petalGroup);
  return svg;
}

const field = document.getElementById('field');
const tulipCount = messages.length;
let picked = 0;
const tulipElements = [];
const totalChains = 4;

function updateChains(pickedCount, totalTulips) {
  const chainsToBreak = Math.floor((pickedCount / totalTulips) * totalChains);
  
  for (let i = 0; i < totalChains; i++) {
    const chainLink = document.getElementById(`chain-${i}`);
    if (i < chainsToBreak) {
      setTimeout(() => {
        chainLink.classList.add('broken');
      }, i * 200);
    }
  }
}

let gustInterval;
function startWindGusts() {
  gustInterval = setInterval(() => {
    if (Math.random() > 0.7) {
      tulipElements.forEach(tulip => {
        if (!tulip.classList.contains('picked')) {
          tulip.style.animation = 'windGust 1.2s ease-in-out';
          setTimeout(() => {
            const dur = 3.6 + Math.random() * 2.2;
            const delay = Math.random() * 1.8;
            tulip.style.animation = `sway ${dur}s ease-in-out ${delay}s infinite`;
          }, 1200); //WindInterval
        }
      });
    }
  }, 400000);
}

for (let i=0;i<tulipCount;i++){
  const wrap = document.createElement('div');
  wrap.className = 'tulip';
  const leftPct = 10 + i*(75/(tulipCount-1));
  const bottomPct = 12 + Math.random()*18;
  wrap.style.left = `${leftPct}%`;
  wrap.style.bottom = `${bottomPct}%`;

  const dur = 3.6 + Math.random()*2.2;
  const delay = Math.random()*1.8;
  wrap.style.animation = `sway ${dur}s ease-in-out ${delay}s infinite`;
  wrap.style.transformOrigin = '50% 85%';

  const baseHue = 325 + Math.round(Math.random()*10 - 5);
  const svg = createTulipSVG(baseHue);
  wrap.appendChild(svg);

  wrap.addEventListener('click', ()=>{
    if (wrap.classList.contains('picked')) return;
    showMessage(messages[i]);
    wrap.classList.add('picked');
    picked++;
    wrap.animate([
      { transform: wrap.style.transform },
      { transform: wrap.style.transform + ' translateY(14px) rotate(6deg) scale(0.96)' }
    ], {duration:600, easing:'ease-out', fill:'forwards'});
    
    updateChains(picked, tulipCount);
    
    if (picked >= tulipCount) {
      setTimeout(()=> openDoorSequence(), 1200);
    }
  });

  field.appendChild(wrap);
  tulipElements.push(wrap);
}

startWindGusts();

function spawnFireflies(n=30){
  for (let i=0;i<n;i++){
    const f = document.createElement('div');
    f.className = 'firefly';
    const left = Math.random()*110 - 5;
    const top = Math.random()*52;
    f.style.left = left + '%';
    f.style.top = top + '%';
    const dx = (Math.random()*60-30);
    const dy = (Math.random()*40-20);
    const dur = 6 + Math.random()*8;
    f.animate([
      { transform: `translate(0px,0px) scale(0.9)`, opacity: 0 },
      { transform: `translate(${dx}px,${-dy}px) scale(1.2)`, opacity: 1 },
      { transform: `translate(${dx/2}px,${dy/2}px) scale(1)`, opacity: 0.6 },
      { transform: `translate(0px,0px) scale(0.9)`, opacity: 0 }
    ], { duration: dur*1000, iterations: Infinity, delay: Math.random()*2000, easing:'ease-in-out' });
    field.appendChild(f);
  }
}
spawnFireflies(20);

const msgBox = document.getElementById('messageBox');
let msgTimer = null;
function showMessage(text){
  clearTimeout(msgTimer);
  msgBox.innerHTML = `<span class="accent">"</span> ${text} <span class="accent">"</span>`;
  msgBox.style.display = 'block';
  msgTimer = setTimeout(()=> msgBox.style.display = 'none', 3000);
}

function openDoorSequence(){
  const door = document.getElementById('door');
  door.animate([{ transform: 'translateY(0) rotate(0)' }, { transform: 'translateY(-8px) rotate(-2deg)' }], { duration: 1200, easing:'ease-out', fill:'forwards' });
  setTimeout(()=> showFinal(), 1600);
}

function showFinal(){
  const fade = document.getElementById('fade');
  fade.classList.add('active');
  fade.style.opacity = 1;
  const txt = "Congratulations Love â™¡\nYou've unlocked my heart again.\nGet ready for your surprise..";
  const final = document.getElementById('finalText');
  const span = document.createElement('span');
  span.className = 'typing';
  span.textContent = txt;
  final.appendChild(span);
  
  setTimeout(() => {
    fade.style.opacity = 0;
    setTimeout(() => {
      fade.classList.remove('active');
      showEnvelope();
    }, 300);
  }, 6000);
}

function showEnvelope() {
  const envelopeScene = document.getElementById('envelopeScene');
  envelopeScene.classList.add('active');
  
  const container = document.getElementById('envelopeContainer');
  const letter = document.getElementById('letter');
  
  container.addEventListener('click', () => {
    if (!container.classList.contains('opened')) {
      container.classList.add('opened');
      letter.classList.add('opened');
    }
  });
}

document.body.addEventListener('click', function startMusic(){
  const bgm = document.getElementById('bgm');
  bgm.volume = 0.25;
  bgm.play().catch(()=>{});
  document.body.removeEventListener('click', startMusic);
});

window.addEventListener('keydown', (e)=>{
  if (e.key === 'Enter') {
    const next = tulipElements.find(t => !t.classList.contains('picked'));
    if (next) next.click();
  }
});
</script>
</body>
</html>
